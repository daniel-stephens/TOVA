{% extends "base.html" %}

{% block title %}TOVA â€“ Topic Visualization & Analysis{% endblock %}

{% block content %}
<div class="container py-5">

  <!-- Hero -->
  <section class="row align-items-center mb-5">
    <div class="col-lg-7 mb-4 mb-lg-0">
      <span class="badge rounded-pill text-bg-primary mb-3">
        <i class="bi bi-stars"></i> Topic Modeling Workspace
      </span>

      <h1 class="display-5 fw-bold mb-3">
        Welcome{% if user %}, {{ user.name }}{% endif %} to TOVA
      </h1>

      <p class="lead text-muted mb-3">
        Upload text corpora, train different topic models, and explore
        interactive dashboards powered by both traditional and LLM-enhanced approaches.
      </p>

      <p class="text-muted mb-4">
        Follow a simple workflow: <strong>Upload</strong> your documents,
        <strong>Train</strong> one or more models, then <strong>Explore</strong>
        the topics, documents, and summaries.
      </p>

      <div class="d-flex flex-wrap gap-2">
        <a href="{{ url_for('load_data_page') }}" class="btn btn-primary">
          <i class="bi bi-upload"></i> Upload Data
        </a>
        <a href="{{ url_for('loadModel') }}" class="btn btn-outline-primary">
          <i class="bi bi-gear-wide-connected"></i> Initiate Training
        </a>
        <a href="{{ url_for('trained_models') }}" class="btn btn-outline-secondary">
          <i class="bi bi-collection"></i> Model Repository
        </a>
      </div>

      <div class="mt-4 small text-muted">
        <i class="bi bi-lightbulb"></i>
        Tip: Configure your preferred LLM once, then reuse it across labeling and summarization tasks.
      </div>
    </div>

    <div class="col-lg-5">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title mb-2">
            <i class="bi bi-sliders"></i> LLM Configuration
          </h5>
          <p class="card-text text-muted mb-3">
            Choose which LLM provider and model TOVA should use for topic labels,
            summaries, and other generated text. 
          </p>

          <button
            class="btn btn-success btn-sm align-self-start"
            data-bs-toggle="modal"
            data-bs-target="#llmModal"
          >
            Open LLM Settings
          </button>

          <ul class="small text-muted mt-3 mb-0 ps-3">
            <li>Per-session preferences for provider, model, and host.</li>
            <li>API keys are treated as sensitive and not sent back to the browser.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Workflow / Features -->
  <section>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card h-100 shadow-sm border-light-subtle">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-2">
              <i class="bi bi-file-earmark-text"></i> Upload &amp; Create Corpora
            </h5>
            <p class="card-text text-muted flex-grow-1">
              Import your text datasets and combine them into corpora for training.
              Manage corpora, attach or detach datasets, and keep your experiments organized.
            </p>
            <a href="{{ url_for('load_corpus_page') }}" class="card-link mt-1">
              Manage corpora
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card h-100 shadow-sm border-light-subtle">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-2">
              <i class="bi bi-bar-chart"></i> Train Topic Models
            </h5>
            <p class="card-text text-muted flex-grow-1">
              Run traditional or LLM-enhanced topic models on your corpora via the
              backend training API. Monitor running jobs and adjust hyperparameters
              such as number of topics and preprocessing options.
            </p>
            <a href="{{ url_for('loadModel') }}" class="card-link mt-1">
              Go to training
            </a>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card h-100 shadow-sm border-light-subtle">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title mb-2">
              <i class="bi bi-grid-3x3-gap"></i> Explore Dashboards
            </h5>
            <p class="card-text text-muted flex-grow-1">
              Browse the model repository, open dashboards, and inspect topic
              distributions, representative documents, and keyword summaries to
              better understand your corpus.
            </p>
            <a href="{{ url_for('trained_models') }}" class="card-link mt-1">
              View trained models
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

</div>
{% endblock %}
